@startuml
title 商品下单时序图
actor 用户
participant 订单模块
participant 库存模块

activate 用户
用户 -> 订单模块: 提交下单请求
activate 订单模块
订单模块 -> 库存模块: 检查商品库存（同步）
activate 库存模块
库存模块 -->> 订单模块: 库存充足
deactivate 库存模块

订单模块 o-> 库存模块: 锁定商品库存（异步）
订单模块 -> 订单模块: 生成订单编号（自调用）
订单模块 -->> 用户: 下单成功
deactivate 订单模块
deactivate 用户
@enduml